---
title: 从输入网址到页面显示
date: 2018-02-27 19:23:25
tags: [面经,笔记]
categories: 笔记
---

## 看了许多网上的面试题，用自己的话来总结下这道经典面试题

### 一些前置知识
1. url的组成，以https://www.baidu.com/为例
	1. http(s) 超文本传输(安全)协议，ht 指超文本, t 指传输,p指协议,s指[ssl](https://baike.baidu.com/item/ssl/320778?fr=aladdin)/[tls](https://baike.baidu.com/item/TLS)
	2. www 指子域名
	3. baidu.com 域名
	4. 端口443（隐藏了而已，http默认80，https默认443)
	5. 最后的/后面是路径

<!-- more -->

2. DNS 
	1. 基于UDP协议的网络协议。专门用于服务器和IP地址的查询。是域名和[IP地址](https://baike.baidu.com/item/IP%E5%9C%B0%E5%9D%80)相互映射的一个[分布式数据库](https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93)，能够使用户更方便的访问[互联网](https://baike.baidu.com/item/%E4%BA%92%E8%81%94%E7%BD%91)，而不用去记住能够被机器直接读取的IP数串。
3. TCP协议
	1. 3次握手：①客户端：你好，在吗 ②服务器端：我在 ③客户端：那开始聊天吧
	2. 4次挥手： ①客户端：我们分手吧 ②服务器端：哦（表示服务器端知道要分手的消息了） ③分吧 （表示服务器端正式开始分开）④客户端：再见！

# 开始说明

---------
1. 输入网址（https://www.baidu.com)
2. 域名不是ip，走dns协议
3. 浏览器把域名发送给<b>系统默认DNS服务器</b>
4. 如果该服务器本地有缓存，且缓存未过期就返回改结果
5. 如果没找到，dns服务器就会向上一级的dns服务器继续查找，直至最上层dns服务器
6. 找到了返回结果（ipv4/ipv6/alias(别名)），找不到就会返回dns错误
7. 浏览器通过TCP协议发起网络请求
8. 请求结束后发起TCP4次挥手

--------

1. 在如果有结果的情况下，浏览器发起网络请求，服务器会返回一个响应包
2. 如果响应状态码是301、 302发生重定向的话，就重复上面过程

------

1. 如果状态码是200时，服务器发回一个HTML响应，浏览器开始显示HTML
2. 浏览器渲染引擎开始渲染HTML
3. 构建DOM树
4. 构建CSS树
4. 构建Render树
5. 布局Render树
6. 绘制Render树

上述过程是逐步完成的的，渲染引擎将会尽可能早的将内容呈现到屏幕上，所以并不会等到所有的html都解析完成之后再去构建和布局render树。

因此我们常把CSS放body前，JavaScript放body的最后，还有重绘、回流等等问题不是主题相关重点，就不说了。

----
参考资料：
1. [前端面试宝典](https://github.com/markyun/My-blog/tree/master/Front-end-Developer-Questions/Questions-and-Answers)
2. 前置知识的所有网站


